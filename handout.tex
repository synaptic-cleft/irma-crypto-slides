%!TEX root = irma-crypto.tex
% in root build with:
% \documentclass[12pt,xcolor=table]{beamer}
% \input{handout.tex}

\usetheme[block=fill]{metropolis}

\usepackage{outlines}
\usepackage{appendixnumberbeamer}
\usepackage{array}
\usepackage{booktabs}

\usepackage{xspace} 

\usepackage{tikz}
\usepackage{amsmath}
\usepackage{mathtools}
\usepackage{wrapfig}
\usepackage{makecell}
\usepackage[makeroom]{cancel}
\usepackage{xcolor}
\usepackage{calc}

\makeatletter
\makeatother
\setbeamertemplate{footline}{%
  \raisebox{5pt}{\makebox[\paperwidth]{\hfill\makebox[10pt]{}}}}
\setbeamersize{text margin left=6mm,text margin right=8mm} 

\usepackage{textpos}

% STYLE

\definecolor{darkblue}{HTML}{074487}
\definecolor{lightblue}{HTML}{1db2e4}
\definecolor{pdBlue}{HTML}{1485bc}
\definecolor{pdGreen}{HTML}{4ab19d}
\definecolor{pdNeonGreen}{HTML}{a2ce4e}
\definecolor{dark}{HTML}{24373b}

%Setting colors
\setbeamercolor{alerted text}{fg=pdBlue}
\setbeamercolor*{palette primary}{fg=dark,bg=orange!15!white}
\setbeamercolor{progress bar}{fg=pdBlue}
\setbeamercolor{example text}{fg=pdGreen}
\setbeamercolor{background canvas}{bg=white}

\begin{document}

\begin{frame} 
  \textbf{Idemix verification equation}\\
  \[ \scalebox{2}{$\displaystyle {\color{red}\tilde{A}}^e = \frac{Z}{{\color{red}S^{\tilde{v}}} \displaystyle R_0^{{\color{cyan}a_0}} R_1^{{\color{blue}a_1}} \cdots R_i^{{\color{blue}a_i}}} \bmod n $}
      \]\\[3em]

  \begin{columns}[onlytextwidth]
    \column{0.55\textwidth}
    public key: $(Z, S, R_0 \cdots R_i, n)$\\
    private key: primes $p,q$ for $n=pq$\\[1em]
    issued signature: $(A,e,v)$\\
    disclosed signature: $(\tilde{A},e,\tilde{v})$
    \column{0.05\textwidth}
    \column{0.4\textwidth}
    {\color{cyan}$a_0$ as holder secret}\\
    {\color{blue}$a_1 \cdots a_i$ as attributes}\\
    {\color{red}$\tilde{A}, S^{\tilde{v}}$ for unlinkability}\\
    $ \tilde{A} = AS^{r} \bmod n$ and $\tilde{v} = v - er $
  \end{columns}
  \end{frame}

\begin{frame}
  \begin{center}
  \begin{columns}[onlytextwidth]
    \column{0.7\textwidth}
    \hspace{1em}
  \begin{minipage}[t][3cm][t]{5cm}
    \begin{block}{Diploma}
      \vspace{0.5em}
      secret: \textbf{xxxxxxxx}, \\
      name: \textbf{xxxxxxxx}, \\
      title: \textbf{PhD}
      \vspace{0.5em}
    \end{block}
    \begin{tikzpicture}[very thick,overlay, remember picture]
      \draw[red, thick] (5,0.5) circle (0.6cm) node {$A, e, v$};
    \end{tikzpicture}
  \end{minipage}

    \column{0.3\textwidth}
  \vspace{2em}
  \hspace{2em}
    \includegraphics[width=0.8\textwidth]{Pictures/slideSource.png}
  \end{columns}
 
  \vspace{1em}
  \textbf{Schnorr's Zero Knowledge protocol}\\
    \vspace{0.5em}
    \begin{tabular}{rll@{\hskip 0.6cm}l}
      given $H=R^{a}$ &&&\\
      choose random $t$ &&&\\
      $U = R^t \bmod n$ & $\xrightarrow{\quad U\quad}$&&\textbf{commitment}\\
      &$\xleftarrow{\quad c\quad}$ & choose random $c$ &\textbf{challenge} \\
      $r = t + ca$ & $\xrightarrow{\quad r\quad}$ & $R^rH^{-c} \stackrel{?}{=} U  \bmod n$ &\textbf{response}\\
      \vspace{0.2em}\\
    \end{tabular}
  \end{center}
  \note{
  }
\end{frame}
\end{document}
